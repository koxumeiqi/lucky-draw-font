<template>
  <LuckyGrid
    ref="myLucky"
    width="300px"
    height="300px"
    rows="3"
    cols="3"
    :prizes="prizes"
    :defaultStyle="defaultStyle"
    :buttons="buttons"
    :onStart="startRaffle"
    :onEnd="raffleOver">
  </LuckyGrid>
</template>

<script>
export default {
  data () {
    return {
      buttons: [
        {
          x: 1,
          y: 1,
          background: '#7f95d1',
          shadow: '3',
          imgs: [{
            src: '@/assets/award/raffle-button.png',
            width: '100px',
            height: '100px'
          }]
        }
      ],
      defaultStyle: [{ background: '#b8c5f2' }],
      prizes: [
        {
          x: 0,
          y: 0,
          fonts: [{
            text: 'data[0].awardTitle',
            top: '80%',
            fontSize: '12px',
            fontWeight: '800'
          }],
          imgs: [{
            src: '@/assets/award/raffle-award-00.png',
            width: '100px',
            height: '100px',
            activeSrc: '@/assets/award/raffle-award-00.png'
          }]
        },
        {
          x: 1,
          y: 0,
          fonts: [{
            text: 'data[1].awardTitle',
            top: '80%',
            fontSize: '12px',
            fontWeight: '800'
          }],
          imgs: [{
            src: '@/assets/award/raffle-award-01.png',
            width: '100px',
            height: '100px',
            activeSrc: '@/assets/award/raffle-award-01.png'
          }]
        },
        {
          x: 2,
          y: 0,
          fonts: [{
            text: 'data[2].awardTitle',
            top: '80%',
            fontSize: '12px',
            fontWeight: '800'
          }],
          imgs: [{
            src: '@/assets/award/raffle-award-02.png',
            width: '100px',
            height: '100px',
            activeSrc: '@/assets/award/raffle-award-02.png'
          }]
        },
        {
          x: 2,
          y: 1,
          fonts: [{
            text: 'data[3].awardTitle',
            top: '80%',
            fontSize: '12px',
            fontWeight: '800'
          }],
          imgs: [{
            src: '@/assets/award/raffle-award-12.png',
            width: '100px',
            height: '100px',
            activeSrc: '@/assets/award/raffle-award-12.png'
          }]
        },
        {
          x: 2,
          y: 2,
          fonts: [{
            text: 'data[4].isAwardUnlock ? data[4].awardTitle : \'å†æŠ½å¥–\' + data[4].waitUnLockCount + \'æ¬¡è§£é”\'',
            top: '80%',
            fontSize: '12px',
            fontWeight: '800'
          }],
          imgs: [{
            src: '@/assets/award/raffle-award-22.png',
            width: '100px',
            height: '100px',
            activeSrc: '@/assets/award/raffle-award-22.png'
          }]
        },
        {
          x: 1,
          y: 2,
          fonts: [{
            text: 'data[5].isAwardUnlock ? data[5].awardTitle : \'å†æŠ½å¥–\' + data[5].waitUnLockCount + \'æ¬¡è§£é”\'',
            top: '80%',
            fontSize: '12px',
            fontWeight: '800'
          }],
          imgs: [{
            src: '@/assets/award/raffle-award-21.png',
            width: '100px',
            height: '100px',
            activeSrc: '@/assets/award/raffle-award-21.png'
          }]
        },
        {
          x: 0,
          y: 2,
          fonts: [{
            text: 'data[6].isAwardUnlock ? data[6].awardTitle : \'å†æŠ½å¥–\' + data[6].waitUnLockCount + \'æ¬¡è§£é”\'',
            top: '80%',
            fontSize: '12px',
            fontWeight: '800'
          }],
          imgs: [{
            src: '@/assets/award/raffle-award-20.png',
            width: '100px',
            height: '100px',
            activeSrc: '@/assets/award/raffle-award-20.png'
          }]
        },
        {
          x: 0,
          y: 1,
          fonts: [{
            text: 'data[7].awardTitle',
            top: '80%',
            fontSize: '12px',
            fontWeight: '800'
          }],
          imgs: [{
            src: '@/assets/award/raffle-award-10.png',
            width: '100px',
            height: '100px',
            activeSrc: '@/assets/award/raffle-award-10.png'
          }]
        }
      ]
    }
  },
  methods: {
    startRaffle (e, button) {
      // ç‚¹å‡»æŠ½å¥–æŒ‰é’®ä¼šè§¦å‘starå›è°ƒ
      setTimeout(() => {
        // è°ƒç”¨æŠ½å¥–ç»„ä»¶çš„playæ–¹æ³•å¼€å§‹æ¸¸æˆ
        this.$refs.myLucky.play()
        // æŠ½å¥–æ¥å£
        const prizeIndex = this.randomRaffleHandle()
        this.$refs.myLucky.stop(prizeIndex)
      }, 2500)
    },
    randomRaffleHandle () {
      const prizeIndex = Math.floor(Math.random() * 9)
      return prizeIndex
    },
    raffleOver (prize) {
      // åŠ è½½æ•°æ®
      // å±•ç¤ºå¥–å“
      alert('æ­å–œæŠ½ä¸­å¥–å“ğŸ’ã€' + prize.fonts[0].text + 'ã€‘')
    }
  }
}

</script>
